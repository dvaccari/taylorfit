/*! For license information please see subworkers.js.LICENSE.txt */
!function(){this.global=this,this.window=this}(),function(){var e=!1;try{document}catch(s){e=!0}if(e){var s=self.postMessage;self.postMessage=function(e,t){try{s(e,t)}catch(e){console.warn(e.message)}},self.Worker=function(e){var s=this;this.id=Math.random().toString(36).substr(2,5),this.eventListeners={message:[]},self.addEventListener("message",(function(e){if(e.data._from===s.id){var t=new MessageEvent("message");t.initMessageEvent("message",!1,!1,e.data.message,s,"",null,[]),s.dispatchEvent(t),s.onmessage&&s.onmessage(t)}})),self.location.pathname;var t=e;self.postMessage({_subworker:!0,cmd:"newWorker",id:this.id,path:t})},Worker.prototype={onerror:null,onmessage:null,postMessage:function(e){self.postMessage({_subworker:!0,id:this.id,cmd:"passMessage",message:e})},terminate:function(){self.postMessage({_subworker:!0,cmd:"terminate",id:this.id})},addEventListener:function(e,s,t){this.eventListeners[e]&&this.eventListeners[e].push(s)},removeEventListener:function(e,s,t){if(e in this.eventListeners){var n=this.eventListeners[e].indexOf(s);-1!==n&&this.eventListeners[e].splice(n,1)}},dispatchEvent:function(e){for(var s=this.eventListeners[e.type],t=0;t<s.length;t++)s[t](e)}}}var t={},n={newWorker:function(e){var s=new Worker(e.data.path);s.addEventListener("message",(function(s){var t={_from:e.data.id,message:s.data};e.target.postMessage(t)})),t[e.data.id]=s},terminate:function(e){t[e.data.id].terminate()},passMessage:function(e){t[e.data.id].postMessage(e.data.message)}},a=function(e){e.data._subworker&&n[e.data.cmd](e)},i=window.Worker;window.Worker=function(e){var s=e.indexOf("blob:");-1!==s&&0!==s&&(e=e.substring(s));var t=new i(e);return t.addEventListener("message",a),t}}();